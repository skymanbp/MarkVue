<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub-Style Markdown Viewer</title>
    <!-- Updated libraries to latest versions -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.3.0/github-markdown.min.css">
    <link rel="stylesheet" id="highlight-theme" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Loading order optimized - ensure libraries are loaded before they're used -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.6/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.9/purify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="container-fluid d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center">
                    <h1 class="h4 mb-0 me-4">GitHub-Style Markdown Viewer</h1>
                    <div id="stats-container" class="stats-container d-flex align-items-center">
                        <div class="stat-item me-3">
                            <i class="bi bi-clock me-1"></i> <span id="reading-time">0</span> Min Read
                        </div>
                        <div class="stat-item me-3">
                            <i class="bi bi-text-paragraph me-1"></i> <span id="word-count">0</span> Words
                        </div>
                        <div class="stat-item">
                            <i class="bi bi-fonts me-1"></i> <span id="char-count">0</span> Chars
                        </div>
                    </div>
                </div>
                <div class="toolbar">
                    <button id="toggle-sync" class="tool-button sync-enabled border-primary" title="Toggle Sync Scrolling">
                        <i class="bi bi-link"></i> Sync Off
                    </button>
                    <button id="import-button" class="tool-button" title="Import Markdown">
                        <i class="bi bi-upload"></i> Import
                    </button>
                    <input type="file" id="file-input" class="file-input" accept=".md,.markdown,text/markdown">
                    
                    <div class="dropdown">
                        <button class="tool-button dropdown-toggle" type="button" id="exportDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-download"></i> Export
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="exportDropdown">
                            <li><a class="dropdown-item" href="#" id="export-md">Markdown (.md)</a></li>
                            <li><a class="dropdown-item" href="#" id="export-html">HTML</a></li>
                            <li><a class="dropdown-item" href="#" id="export-pdf">PDF</a></li>
                        </ul>
                    </div>
                    
                    <button id="copy-html-button" class="tool-button" title="Copy HTML">
                        <i class="bi bi-clipboard"></i> Copy HTML
                    </button>
                    
                    <button id="theme-toggle" class="tool-button" title="Toggle Dark Mode">
                        <i class="bi bi-moon"></i>
                    </button>
                </div>
            </div>
        </header>

        <div id="dropzone" class="dropzone container-fluid mt-2">
            <p class="mb-0"><i class="bi bi-cloud-arrow-up me-2"></i>Drop your Markdown file here or click to browse</p>
        </div>

        <div class="content-container">
            <div class="editor-pane">
                <textarea id="markdown-editor" placeholder="Type or paste your Markdown here..."></textarea>
            </div>
            <div class="preview-pane">
                <div id="markdown-preview" class="markdown-body"></div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</head>
</html>